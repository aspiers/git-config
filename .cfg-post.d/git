#!/bin/sh

if which zsh >&/dev/null; then
  zsh -c zrec
fi

# too lazy to make separate cfgctl module with personal config
if [[ "$ZDOTUSER" == adam.spiers ]]; then
  git config --global user.name "Adam Spiers"
  # set user.email on a per-project basis
  git config --global user.signingkey 7A2F2DDC
fi

git config --global color.ui auto
git config --global color.pager true
git config --global color.diff auto

# Paging
#git config --global core.pager $PAGER
git config --global pager.diff-tree true

##############################################################################
# set up .gitignore from .cvsignore

git config --global core.excludesfile ~/.gitignore

if ! [ -e "$HOME/.cvsignore" ]; then
    echo "WARNING: ~/.cvsignore not found, won't create ~/.gitignore." >&2
    exit 1
fi

if [ -L ~/.gitignore ]; then
  echo "ERROR: .gitignore is a symlink, won't overwrite" >&2
  exit 1
fi

cat <<EOF > ~/.gitignore
# Automatically generated by $0
# on `date`
# DO NOT EDIT!

EOF

sed 's/^#/\\#/g' ~/.cvsignore >> ~/.gitignore

